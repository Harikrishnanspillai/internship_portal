{% extends "base.html" %}
{% block title %}Student Dashboard{% endblock %}

{% block content %}
<div class="card">
    <h2>Welcome, {{ info.name }}</h2>

    <p><strong>Department:</strong> {{ info.department }}</p>
    <p><strong>CGPA:</strong> {{ info.cgpa }}</p>

    <h3 class="mt-2">Applications</h3>
    <p>Total applications: {{ app_count }}</p>

    <hr>

    <h3>Documents</h3>
    {% if docs.total > 0 %}
        <p>Total uploaded: {{ docs.total }}</p>
        <p>Approved: {{ docs.approved }}</p>
        <p>Pending: {{ docs.pending }}</p>
        <p>Rejected: {{ docs.rejected }}</p>
    {% else %}
        <p>No documents uploaded.</p>
    {% endif %}
    <a class="btn" href="{{ url_for('student.upload_docs') }}">Upload Documents</a>

    <hr>

    <h3>Visa Status</h3>
    {% if visa %}
        <p><strong>Country:</strong> {{ visa.country }}</p>
        <p><strong>Status:</strong> {{ visa.application_status }}</p>
        <p><strong>Issued:</strong> {{ visa.issued_date }}</p>
        <p><strong>Expires:</strong> {{ visa.expiry_date }}</p>
    {% else %}
        <p>No visa application submitted.</p>
    {% endif %}
    <a class="btn" href="{{ url_for('student.visa_application') }}">Visa Application</a>

    <hr>

    <h3>Housing Status</h3>
    {% if housing %}
        <p><strong>Location:</strong> {{ housing.location }}</p>
        <p><strong>Room Type:</strong> {{ housing.room_type }}</p>
        <p><strong>Rent:</strong> {{ housing.rent }}</p>
        <p><strong>Allotted:</strong> {{ housing.allotment_date }}</p>
    {% else %}
        <p>No housing assigned.</p>
    {% endif %}
    <a class="btn" href="{{ url_for('student.housing_status') }}">View Housing</a>

    <hr>

    <a class="btn" href="{{ url_for('student.programs') }}">Browse Programs</a>
    <a class="btn" href="{{ url_for('student.profile') }}">Edit Profile</a>

</div>
{% endblock %}
