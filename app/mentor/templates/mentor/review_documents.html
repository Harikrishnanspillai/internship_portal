{% extends "base.html" %}
{% block title %}Document Review{% endblock %}

{% block content %}
<div class="card">
    <h2>Document Review</h2>

    {% if docs %}
    <table class="table">
        <tr>
            <th>Student</th>
            <th>Program</th>
            <th>Document</th>
            <th>File</th>
            <th>Status</th>
            <th>Action</th>
        </tr>

        {% for d in docs %}
        <tr>
            <td>{{ d.student_name }}</td>
            <td>{{ d.program_title }}</td>
            <td>{{ d.document_name }}</td>
            <td>
                <a href="/static/uploads/{{ d.file_name }}" target="_blank">
                    View
                </a>
            </td>
            <td>{{ d.status }}</td>
            <td>
                {% if d.status == 'Pending' %}
                    <form method="POST"
                          action="{{ url_for('mentor.decide_document', app_id=d.application_id, req_id=d.req_id, action='approve') }}"
                          style="display:inline;">
                        <button class="btn">Approve</button>
                    </form>

                    <form method="POST"
                          action="{{ url_for('mentor.decide_document', app_id=d.application_id, req_id=d.req_id, action='reject') }}"
                          style="display:inline;">
                        <button class="btn del">Reject</button>
                    </form>
                {% else %}
                    <strong>{{ d.status }}</strong>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No documents at the moment.</p>
    {% endif %}
</div>
{% endblock %}
